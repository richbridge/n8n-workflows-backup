{
  "updatedAt": "2025-12-12T02:24:18.259Z",
  "createdAt": "2025-12-10T02:46:46.890Z",
  "id": "u529WeT5QZAy6yD1",
  "name": "My workflow 4",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "content": "## ðŸ“° Flow 1: AWS News Collection & Analysis\n\n**Automated daily news monitoring and AI-powered analysis**\n\n### Process Flow:\n1. **Scheduled Trigger** â†’ Runs daily at 8 PM\n2. **RSS Reader** â†’ Fetches latest AWS news\n3. **Data Debugger** â†’ Validates and cleans RSS data\n4. **AI Agent** â†’ Analyzes news with Claude 3 Sonnet\n5. **Data Cleaner** â†’ Formats structured output\n6. **Feishu Bitable** â†’ Stores analyzed news\n\n### AI Analysis Includes:\n- Professional 200-word summary\n- Key themes and keywords\n- Importance rating (Low/Medium/High)\n- Business impact assessment\n- Source link preservation",
        "height": 528,
        "width": 1936,
        "color": 3
      },
      "id": "ccc419bf-aca6-4f3e-9364-cb3402a8d334",
      "name": "Flow 1: News Collection & Analysis",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2080,
        80
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 20
            }
          ]
        }
      },
      "id": "90eb43b3-d679-41ff-9958-0702a3c1bf4b",
      "name": "Scheduled Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -1664,
        176
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "url": "https://aws.amazon.com/about-aws/whats-new/recent/feed",
        "options": {}
      },
      "id": "40b6440f-d4fa-4c39-b00b-280ec4578e83",
      "name": "RSS Reader",
      "type": "n8n-nodes-base.rssFeedRead",
      "position": [
        -1440,
        176
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "jsCode": "// RSS Data Debugger\nconst rssData = $input.all();\nconsole.log('=== RSS Data Debug Info ===');\nconsole.log('Input data type:', typeof rssData);\nconsole.log('Input data length:', rssData ? rssData.length : 'undefined');\nconsole.log('Input data structure:', JSON.stringify(rssData, null, 2));\n\n// If data is empty, return default test data\nif (!rssData || rssData.length === 0) {\n  console.log('RSS data is empty, returning test data');\n  return [\n    {\n      title: 'Test AI News Title',\n      description: 'This is a test AI-related news description',\n      pubDate: new Date().toISOString(),\n      link: 'https://example.com/test'\n    }\n  ];\n}\n\nreturn rssData;"
      },
      "id": "5bf4c7d6-ea92-4cae-ab7f-39ff38f84812",
      "name": "RSS Data Debugger",
      "type": "n8n-nodes-base.code",
      "position": [
        -1216,
        176
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ JSON.stringify($json) }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are a professional AWS analyst. Your task is to analyze AWS industry news. Please strictly follow the required JSON format for output, ensuring all quotes are properly escaped.\nFor each news item, you need to:\n1. Extract news title, publication date, and original link\n2. Generate a news summary of about 200 words, highlighting core points and key information\n3. Extract 1-3 keywords that reflect the main themes of the news\n4. Assess news importance, divided into three levels: Low, Medium, High\n- High: Major technological breakthroughs, important policy releases, large mergers and acquisitions, major developments of industry benchmark companies\n- Medium: New product launches, funding news, technological progress, industry reports, important partnerships\n- Low: General reports, opinion articles, small-scale developments, routine updates\n\nEach output format must strictly follow the following JSON structure, do not add any other content:\n{\n\"title\":\"News Title\",\n\"pubDate\":\"Publication Date\",\n\"summary\":\"News summary of about 200 words, highlighting core points\",\n\"keywords\":[\"Keyword1\",\"Keyword2\",\n\"Keyword3\"],\n\"rating\":\"Low/Medium/High\",\n\"link\":\"Original Link\"\n}",
          "maxIterations": 5,
          "returnIntermediateSteps": false
        }
      },
      "id": "2f1b2aed-13c0-4b9b-b79b-d9659f206f72",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -1008,
        176
      ],
      "typeVersion": 2.2,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\"title\":\"News Title\",\n\"pubDate\":\"Publication Date\",\n\"summary\":\"News summary of about 200 words, highlighting core points\",\n\"keywords\":[\"Keyword1\",\"Keyword2\",\n\"Keyword3\"],\n\"rating\":\"Low/Medium/High\",\n\"link\":\"Original Link\"\n}"
      },
      "id": "d14adb82-983c-4ca7-8e37-765501154f78",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        -864,
        448
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "jsCode": "// Data Cleaner Node - Fixed Version\nconst inputData = $input.all();\nconsole.log('=== Data Cleaner Node Started ===');\nconsole.log('Input data type:', typeof inputData);\nconsole.log('Input data length:', inputData ? inputData.length : 'undefined');\nconsole.log('Input data structure:', JSON.stringify(inputData, null, 2));\n\nconst cleanedData = [];\n\n// Ensure there is input data\nif (!inputData || inputData.length === 0) {\n  console.log('No input data');\n  return [];\n}\n\n// Process each input item\nfor (let i = 0; i < inputData.length; i++) {\n  const item = inputData[i];\n  console.log(`\\nProcessing item ${i + 1}:`, item);\n  \n  try {\n    // Extract actual data content\n    let newsData;\n    \n    // Check different data structures\n    if (item.output) {\n      // Standard format: {output: {...}}\n      newsData = item.output;\n      console.log('Found output format data');\n    } else if (item.json && item.json.output) {\n      // n8n format: {json: {output: {...}}}\n      newsData = item.json.output;\n      console.log('Found json.output format data');\n    } else if (item.json) {\n      // Direct json format: {json: {...}}\n      newsData = item.json;\n      console.log('Found direct json format data');\n    } else {\n      // Direct data format\n      newsData = item;\n      console.log('Found direct data format');\n    }\n    \n    console.log('Extracted news data:', newsData);\n    \n    // Validate required fields\n    if (!newsData.title || !newsData.pubDate) {\n      console.log('Skipping invalid data item, missing required fields');\n      continue;\n    }\n    \n    // Clean and standardize data\n    const cleanOutput = {\n      title: (newsData.title || '').replace(/\"/g, '').trim(),\n      pubDate: (newsData.pubDate || '').trim(),\n      summary: (newsData.summary || '').replace(/\"/g, '').trim(),\n      keywords: Array.isArray(newsData.keywords) ? newsData.keywords : [],\n      rating: (newsData.rating || '').trim(),\n      link: (newsData.link || '').trim()\n    };\n    \n    console.log('Cleaned data:', cleanOutput);\n    \n    // Add to cleaned data array\n    cleanedData.push({\n      json: {\n        output: cleanOutput\n      }\n    });\n    \n    console.log('âœ… Successfully processed data item:', cleanOutput.title.substring(0, 50));\n    \n  } catch (error) {\n    console.log('âŒ Error processing data item:', error.message);\n    console.log('Problematic data item:', item);\n    continue;\n  }\n}\n\nconsole.log('\\n=== Data Cleaning Completed ===');\nconsole.log('Cleaned data count:', cleanedData.length);\nconsole.log('Cleaned data:', JSON.stringify(cleanedData, null, 2));\n\nreturn cleanedData;"
      },
      "id": "21245006-084b-41a7-9ba7-fda74825d61f",
      "name": "Data Cleaner",
      "type": "n8n-nodes-base.code",
      "position": [
        -704,
        176
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "model": "anthropic.claude-3-sonnet-20240229-v1:0",
        "options": {}
      },
      "id": "06d5a848-adb9-43d8-a889-27478b10a02b",
      "name": "AWS Bedrock Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
      "position": [
        -1008,
        448
      ],
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "webhookUrl": "https://www.kdocs.cn/api/v3/ide/file/475253428153/script/V2-5xxwYuhzUByVy5ax1HAtaP/sync_task",
        "contextParameters": {
          "sheetName": "é•¿æ±Ÿæœ‰è‰²ç½‘æ•°æ®"
        },
        "argv": "={\n  \"targetSheetName\": \"é•¿æ±Ÿæœ‰è‰²ç½‘æ•°æ®\",\n  \"title\": \"{{ $json.output.title }}\"\n} ",
        "options": {}
      },
      "type": "n8n-nodes-kingsoft-airscript.kingsoftAirscript",
      "typeVersion": 3,
      "position": [
        -496,
        176
      ],
      "id": "ae1082b9-478b-4f8f-a131-f4942e2e3287",
      "name": "Kingsoft AirScript",
      "credentials": {
        "kingsoftAirscriptApi": {
          "id": "DFb9jRCEzeaq1Zny",
          "name": "é‡‘å±± AirScript account"
        }
      }
    }
  ],
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "Data Cleaner",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Reader": {
      "main": [
        [
          {
            "node": "RSS Data Debugger",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Data Cleaner": {
      "main": [
        [
          {
            "node": "Kingsoft AirScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Data Debugger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scheduled Trigger": {
      "main": [
        [
          {
            "node": "RSS Reader",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AWS Bedrock Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "72814d57-b11b-462a-8480-678629909c72",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-12-10T02:46:46.890Z",
      "createdAt": "2025-12-10T02:46:46.890Z",
      "role": "workflow:owner",
      "workflowId": "u529WeT5QZAy6yD1",
      "projectId": "T1fAu0RPM0YkPUBu"
    }
  ],
  "activeVersion": null,
  "tags": []
}